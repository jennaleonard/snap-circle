{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/jennaleonard/Desktop/sea/snap-circle/screens/ProfileScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport firebase from \"@firebase/app\";\nimport React, { useState, useEffect } from \"react\";\nimport Colors from \"../constants/Colors\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { useActionSheet } from \"@expo/react-native-action-sheet\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport db from \"../firebase\";\nexport default function ProfileScreen() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currUser = _useState2[0],\n      setCurrUser = _useState2[1];\n\n  var _useActionSheet = useActionSheet(),\n      showActionSheetWithOptions = _useActionSheet.showActionSheetWithOptions;\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      imageURI = _useState4[0],\n      setImageURI = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalVisible = _useState6[0],\n      setModalVisible = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      displayName = _useState8[0],\n      setDisplayName = _useState8[1];\n\n  useEffect(function () {\n    return db.collection(\"Users\").doc(firebase.auth().currentUser.uid).onSnapshot(function (userSnapshot) {\n      setCurrUser(_objectSpread({\n        uid: userSnapshot.id\n      }, userSnapshot.data()));\n    });\n  }, []);\n  useEffect(function () {\n    if (!currUser) return;\n    setImageURI(currUser.photoURL);\n    setDisplayName(currUser.displayName);\n  }, [currUser]);\n\n  var onPressLogout = function onPressLogout() {\n    return _regeneratorRuntime.async(function onPressLogout$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firebase.auth().signOut().then(function () {\n              console.log(\"Signed out!\");\n              setCurrUser(null);\n            }).catch(function (error) {\n              alert(error.message);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onEditAvatar = function onEditAvatar() {\n    showActionSheetWithOptions({\n      options: [\"Camera\", \"Image Library\", \"Cancel\"],\n      cancelButtonIndex: 2\n    }, function (buttonIndex) {\n      if (buttonIndex == 0) {\n        handleCamera();\n      } else if (buttonIndex == 1) {\n        handleLibrary();\n      }\n\n      console.log(buttonIndex);\n    });\n  };\n\n  var handleCamera = function handleCamera() {\n    var permissions, _await$ImagePicker$re, status, result;\n\n    return _regeneratorRuntime.async(function handleCamera$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(Platform.OS !== \"web\")) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.getCameraPermissionsAsync());\n\n          case 3:\n            permissions = _context2.sent;\n\n            if (permissions.granted) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(ImagePicker.requestCameraPermissionsAsync());\n\n          case 7:\n            _await$ImagePicker$re = _context2.sent;\n            status = _await$ImagePicker$re.status;\n\n            if (status !== \"granted\") {\n              alert(\"Sorry, we need camera permissions to make this work!\");\n            }\n\n          case 10:\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 0.5\n            }));\n\n          case 12:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              console.log(result);\n              setImageURI(result.uri);\n              uploadAndUpdateAvatar(result.uri);\n            }\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleLibrary = function handleLibrary() {\n    var permissions, _await$ImagePicker$re2, status, result;\n\n    return _regeneratorRuntime.async(function handleLibrary$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!(Platform.OS !== \"web\")) {\n              _context3.next = 10;\n              break;\n            }\n\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.getMediaLibraryPermissionsAsync());\n\n          case 3:\n            permissions = _context3.sent;\n\n            if (permissions.granted) {\n              _context3.next = 10;\n              break;\n            }\n\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n          case 7:\n            _await$ImagePicker$re2 = _context3.sent;\n            status = _await$ImagePicker$re2.status;\n\n            if (status !== \"granted\") {\n              alert(\"Sorry, we need media library to make this work!\");\n            }\n\n          case 10:\n            _context3.next = 12;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 0.5\n            }));\n\n          case 12:\n            result = _context3.sent;\n\n            if (!result.cancelled) {\n              console.log(result);\n              setImageURI(result.uri);\n              uploadAndUpdateAvatar(result.uri);\n            }\n\n          case 14:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadAndUpdateAvatar = function uploadAndUpdateAvatar(imageURI) {\n    var filename, response, blob, uploadTask, downloadURL;\n    return _regeneratorRuntime.async(function uploadAndUpdateAvatar$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            filename = imageURI.substring(imageURI.lastIndexOf(\"/\") + 1);\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(fetch(imageURI));\n\n          case 4:\n            response = _context4.sent;\n            _context4.next = 7;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 7:\n            blob = _context4.sent;\n            uploadTask = firebase.storage().ref(currUser.uid + \"/\" + filename).put(blob);\n            uploadTask.on(\"state_changed\", function (snapshot) {});\n            _context4.next = 12;\n            return _regeneratorRuntime.awrap(uploadTask);\n\n          case 12:\n            _context4.next = 14;\n            return _regeneratorRuntime.awrap(uploadTask.snapshot.ref.getDownloadURL());\n\n          case 14:\n            downloadURL = _context4.sent;\n            console.log(downloadURL);\n            _context4.next = 18;\n            return _regeneratorRuntime.awrap(db.collection(\"Users\").doc(currUser.uid).set({\n              photoURL: downloadURL\n            }, {\n              merge: true\n            }).then(function () {\n              console.log(\"Updated photo URL!\");\n            }).catch(function (error) {\n              alert(error.message);\n            }));\n\n          case 18:\n            _context4.next = 23;\n            break;\n\n          case 20:\n            _context4.prev = 20;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.error(_context4.t0);\n\n          case 23:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 20]], Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, currUser ? React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.headerColumn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: onEditAvatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    style: styles.userImage,\n    source: {\n      uri: imageURI\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  })), React.createElement(View, {\n    style: styles.Row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.userNameText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, displayName), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return setModalVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, React.createElement(Ionicons, {\n    name: \"create-outline\",\n    size: 25,\n    style: {\n      marginBottom: 8,\n      marginLeft: 3\n    },\n    color: Colors.snapgray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }))), React.createElement(View, {\n    style: styles.Row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.descriptionText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, currUser.email))), React.createElement(View, {\n    style: styles.Row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: [styles.buttonContainer, styles.logoutButton],\n    onPress: onPressLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.logoutText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Logout\"))), React.createElement(EditModal, {\n    setDisplayName: setDisplayName,\n    setModalVisible: setModalVisible,\n    modalVisible: modalVisible,\n    currUser: currUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  })) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }));\n}\n\nfunction EditModal(props) {\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      newName = _useState10[0],\n      setNewName = _useState10[1];\n\n  var onPressSaveNewName = function onPressSaveNewName() {\n    return _regeneratorRuntime.async(function onPressSaveNewName$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            props.setModalVisible(!props.modalVisible);\n            props.setDisplayName(newName);\n            _context5.next = 4;\n            return _regeneratorRuntime.awrap(db.collection(\"Users\").doc(props.currUser.uid).set({\n              displayName: newName\n            }, {\n              merge: true\n            }).then(function () {\n              console.log(\"Updated display name!\");\n            }).catch(function (error) {\n              alert(error.message);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: props.modalVisible,\n    onRequestClose: function onRequestClose() {\n      Alert.alert(\"Modal has been closed.\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.modalText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, \"Change your name:\"), React.createElement(TextInput, {\n    autoFocus: true,\n    onChangeText: setNewName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: _objectSpread(_objectSpread({}, styles.openButton), {}, {\n      backgroundColor: \"#2196F3\"\n    }),\n    onPress: onPressSaveNewName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  }, \"Save New Name\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      props.setModalVisible(!props.modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.cancelText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, \"Cancel\")))));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"white\"\n  },\n  headerColumn: {\n    backgroundColor: \"transparent\",\n    paddingBottom: 20,\n    paddingTop: 45,\n    justifyContent: \"center\"\n  },\n  Row: {\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"center\"\n  },\n  descriptionText: {\n    color: \"#A5A5A5\",\n    fontSize: 15,\n    fontWeight: \"600\",\n    textAlign: \"center\"\n  },\n  userImage: {\n    borderColor: Colors.tintColor,\n    borderRadius: 85,\n    borderWidth: 3,\n    height: 170,\n    marginBottom: 15,\n    width: 170\n  },\n  userNameText: {\n    color: \"black\",\n    fontSize: 22,\n    fontWeight: \"bold\",\n    paddingBottom: 8,\n    textAlign: \"center\"\n  },\n  buttonContainer: {\n    height: 45,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: 20,\n    width: 300,\n    borderRadius: 30,\n    backgroundColor: \"transparent\"\n  },\n  logoutButton: {\n    backgroundColor: Colors.snapblue\n  },\n  logoutText: {\n    color: \"white\",\n    fontWeight: \"bold\"\n  },\n  modalView: {\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 50,\n    marginTop: 300,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  openButton: {\n    backgroundColor: \"#F194FF\",\n    borderRadius: 20,\n    padding: 10,\n    margin: 20,\n    elevation: 2\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  cancelText: {\n    color: \"black\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/jennaleonard/Desktop/sea/snap-circle/screens/ProfileScreen.js"],"names":["firebase","React","useState","useEffect","Colors","Ionicons","useActionSheet","ImagePicker","db","ProfileScreen","currUser","setCurrUser","showActionSheetWithOptions","imageURI","setImageURI","modalVisible","setModalVisible","displayName","setDisplayName","collection","doc","auth","currentUser","uid","onSnapshot","userSnapshot","id","data","photoURL","onPressLogout","signOut","then","console","log","catch","error","alert","message","onEditAvatar","options","cancelButtonIndex","buttonIndex","handleCamera","handleLibrary","Platform","OS","getCameraPermissionsAsync","permissions","granted","requestCameraPermissionsAsync","status","launchCameraAsync","allowsEditing","aspect","quality","result","cancelled","uri","uploadAndUpdateAvatar","getMediaLibraryPermissionsAsync","requestMediaLibraryPermissionsAsync","launchImageLibraryAsync","filename","substring","lastIndexOf","fetch","response","blob","uploadTask","storage","ref","put","on","snapshot","getDownloadURL","downloadURL","set","merge","styles","container","headerColumn","userImage","Row","userNameText","marginBottom","marginLeft","snapgray","descriptionText","email","buttonContainer","logoutButton","logoutText","EditModal","props","newName","setNewName","onPressSaveNewName","Alert","centeredView","modalView","modalText","openButton","backgroundColor","textStyle","cancelText","StyleSheet","create","flex","alignItems","paddingBottom","paddingTop","justifyContent","flexDirection","color","fontSize","fontWeight","textAlign","borderColor","tintColor","borderRadius","borderWidth","height","width","snapblue","padding","marginTop","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","margin"],"mappings":"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","sourcesContent":["import firebase from \"@firebase/app\";\nimport React, { useState, useEffect } from \"react\";\nimport Colors from \"../constants/Colors\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport {\n  Image,\n  StyleSheet,\n  Text,\n  View,\n  TouchableOpacity,\n  Platform,\n  Modal,\n  TextInput,\n} from \"react-native\";\nimport { useActionSheet } from \"@expo/react-native-action-sheet\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport db from \"../firebase\";\n\nexport default function ProfileScreen() {\n  const [currUser, setCurrUser] = useState(null);\n\n  const { showActionSheetWithOptions } = useActionSheet();\n  const [imageURI, setImageURI] = useState(null);\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [displayName, setDisplayName] = useState(\"\");\n\n  useEffect(() => {\n    // Download curr user info\n    // (and listen for future updates)\n    // (in case curr user decides to update their profile info)\n    return db\n      .collection(\"Users\")\n      .doc(firebase.auth().currentUser.uid)\n      .onSnapshot((userSnapshot) => {\n        setCurrUser({ uid: userSnapshot.id, ...userSnapshot.data() });\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!currUser) return;\n    setImageURI(currUser.photoURL);\n    setDisplayName(currUser.displayName);\n  }, [currUser]);\n\n  const onPressLogout = async () => {\n    await firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        // Sign-out successful.\n        console.log(\"Signed out!\");\n        setCurrUser(null);\n      })\n      .catch((error) => {\n        // An error happened.\n        alert(error.message);\n      });\n  };\n\n  const onEditAvatar = () => {\n    showActionSheetWithOptions(\n      {\n        options: [\"Camera\", \"Image Library\", \"Cancel\"],\n        cancelButtonIndex: 2,\n      },\n      (buttonIndex) => {\n        if (buttonIndex == 0) {\n          handleCamera();\n        } else if (buttonIndex == 1) {\n          handleLibrary();\n        }\n        console.log(buttonIndex);\n      }\n    );\n  };\n\n  const handleCamera = async () => {\n    if (Platform.OS !== \"web\") {\n      let permissions = await ImagePicker.getCameraPermissionsAsync();\n      if (!permissions.granted) {\n        const { status } = await ImagePicker.requestCameraPermissionsAsync();\n        if (status !== \"granted\") {\n          alert(\"Sorry, we need camera permissions to make this work!\");\n        }\n      }\n    }\n\n    let result = await ImagePicker.launchCameraAsync({\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.5,\n    });\n    if (!result.cancelled) {\n      console.log(result);\n      setImageURI(result.uri);\n      uploadAndUpdateAvatar(result.uri);\n    }\n  };\n\n  const handleLibrary = async () => {\n    if (Platform.OS !== \"web\") {\n      let permissions = await ImagePicker.getMediaLibraryPermissionsAsync();\n      if (!permissions.granted) {\n        const { status } =\n          await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== \"granted\") {\n          alert(\"Sorry, we need media library to make this work!\");\n        }\n      }\n    }\n\n    let result = await ImagePicker.launchImageLibraryAsync({\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.5,\n    });\n    if (!result.cancelled) {\n      console.log(result);\n      setImageURI(result.uri);\n      uploadAndUpdateAvatar(result.uri);\n    }\n  };\n\n  const uploadAndUpdateAvatar = async (imageURI) => {\n    try {\n      const filename = imageURI.substring(imageURI.lastIndexOf(\"/\") + 1);\n      const response = await fetch(imageURI);\n      const blob = await response.blob();\n\n      const uploadTask = firebase\n        .storage()\n        .ref(currUser.uid + \"/\" + filename) // unique path\n        .put(blob);\n      // set progress state\n      uploadTask.on(\"state_changed\", (snapshot) => {\n        // Can keep track of upload progress here\n        // setTransferred(\n        //   Math.round(snapshot.bytesTransferred / snapshot.totalBytes) * 10000\n        // );\n      });\n\n      await uploadTask;\n      let downloadURL = await uploadTask.snapshot.ref.getDownloadURL();\n      console.log(downloadURL);\n      await db\n        .collection(\"Users\")\n        .doc(currUser.uid)\n        .set(\n          {\n            photoURL: downloadURL,\n          },\n          { merge: true }\n        )\n        .then(() => {\n          console.log(\"Updated photo URL!\");\n        })\n        .catch((error) => {\n          alert(error.message);\n        });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {currUser ? (\n        <>\n          <View style={styles.headerColumn}>\n            <TouchableOpacity onPress={onEditAvatar}>\n              <Image style={styles.userImage} source={{ uri: imageURI }} />\n            </TouchableOpacity>\n            <View style={styles.Row}>\n              <Text style={styles.userNameText}>{displayName}</Text>\n              <TouchableOpacity onPress={() => setModalVisible(true)}>\n                <Ionicons\n                  name={\"create-outline\"}\n                  size={25}\n                  style={{ marginBottom: 8, marginLeft: 3 }}\n                  color={Colors.snapgray}\n                />\n              </TouchableOpacity>\n            </View>\n            <View style={styles.Row}>\n              <Text style={styles.descriptionText}>{currUser.email}</Text>\n            </View>\n          </View>\n          <View style={styles.Row}>\n            <TouchableOpacity\n              style={[styles.buttonContainer, styles.logoutButton]}\n              onPress={onPressLogout}\n            >\n              <Text style={styles.logoutText}>Logout</Text>\n            </TouchableOpacity>\n          </View>\n          <EditModal\n            setDisplayName={setDisplayName}\n            setModalVisible={setModalVisible}\n            modalVisible={modalVisible}\n            currUser={currUser}\n          ></EditModal>\n        </>\n      ) : (\n        <View></View>\n      )}\n    </View>\n  );\n}\n\nfunction EditModal(props) {\n  const [newName, setNewName] = useState(\"\");\n\n  const onPressSaveNewName = async () => {\n    props.setModalVisible(!props.modalVisible);\n    props.setDisplayName(newName);\n\n    await db\n      .collection(\"Users\")\n      .doc(props.currUser.uid)\n      .set(\n        {\n          displayName: newName,\n        },\n        { merge: true }\n      )\n      .then(() => {\n        console.log(\"Updated display name!\");\n      })\n      .catch((error) => {\n        alert(error.message);\n      });\n  };\n\n  return (\n    <Modal\n      animationType=\"slide\"\n      transparent={true}\n      visible={props.modalVisible}\n      onRequestClose={() => {\n        Alert.alert(\"Modal has been closed.\");\n      }}\n    >\n      <View style={styles.centeredView}>\n        <View style={styles.modalView}>\n          <Text style={styles.modalText}>Change your name:</Text>\n          <TextInput autoFocus={true} onChangeText={setNewName} />\n\n          <TouchableOpacity\n            style={{ ...styles.openButton, backgroundColor: \"#2196F3\" }}\n            onPress={onPressSaveNewName}\n          >\n            <Text style={styles.textStyle}>Save New Name</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            onPress={() => {\n              props.setModalVisible(!props.modalVisible);\n            }}\n          >\n            <Text style={styles.cancelText}>Cancel</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n  },\n  headerColumn: {\n    backgroundColor: \"transparent\",\n    paddingBottom: 20,\n    paddingTop: 45,\n    justifyContent: \"center\",\n  },\n  Row: {\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n  },\n  descriptionText: {\n    color: \"#A5A5A5\",\n    fontSize: 15,\n    fontWeight: \"600\",\n    textAlign: \"center\",\n  },\n  userImage: {\n    borderColor: Colors.tintColor,\n    borderRadius: 85,\n    borderWidth: 3,\n    height: 170,\n    marginBottom: 15,\n    width: 170,\n  },\n  userNameText: {\n    color: \"black\",\n    fontSize: 22,\n    fontWeight: \"bold\",\n    paddingBottom: 8,\n    textAlign: \"center\",\n  },\n  buttonContainer: {\n    height: 45,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: 20,\n    width: 300,\n    borderRadius: 30,\n    backgroundColor: \"transparent\",\n  },\n  logoutButton: {\n    backgroundColor: Colors.snapblue,\n  },\n  logoutText: {\n    color: \"white\",\n    fontWeight: \"bold\",\n  },\n  modalView: {\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 50,\n    marginTop: 300,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  openButton: {\n    backgroundColor: \"#F194FF\",\n    borderRadius: 20,\n    padding: 10,\n    margin: 20,\n    elevation: 2,\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  cancelText: {\n    color: \"black\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}